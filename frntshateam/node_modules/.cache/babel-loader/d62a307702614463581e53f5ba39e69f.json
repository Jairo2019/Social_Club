{"ast":null,"code":"var toHex = require('colornames');\n\nvar _words = require('lodash.words');\n\nvar trimStart = require('lodash.trimstart');\n\nvar padEnd = require('lodash.padend');\n\nvar rgbHex = require('rgb-hex');\n\nvar hexRgb = require('hex-rgb');\n\nvar MIXED_WEIGHT = 0.75;\nvar TEXT_WEIGHT = 0.25;\nvar SEED = 16777215;\nvar FACTOR = 49979693;\n\nmodule.exports = function (object) {\n  return '#' + generateColor(String(JSON.stringify(object)));\n};\n\nfunction getColors(text) {\n  var words = _words(text);\n\n  var colors = [];\n  words.forEach(function (word) {\n    var color = toHex(word);\n    if (color) colors.push(hexRgb(trimStart(color, '#')));\n  });\n  return colors;\n}\n\nfunction mixColors(colors) {\n  var mixed = [0, 0, 0];\n  colors.forEach(function (value) {\n    for (var i = 0; i < 3; i++) {\n      mixed[i] += value[i];\n    }\n  });\n  return [mixed[0] / colors.length, mixed[1] / colors.length, mixed[2] / colors.length];\n}\n\nfunction generateColor(text) {\n  var mixed;\n  var colors = getColors(text);\n  if (colors.length > 0) mixed = mixColors(colors);\n  var b = 1;\n  var d = 0;\n  var f = 1;\n\n  if (text.length > 0) {\n    for (var i = 0; i < text.length; i++) {\n      text[i].charCodeAt(0) > d && (d = text[i].charCodeAt(0)), f = parseInt(SEED / d), b = (b + text[i].charCodeAt(0) * f * FACTOR) % SEED;\n    }\n  }\n\n  var hex = (b * text.length % SEED).toString(16);\n  hex = padEnd(hex, 6, hex);\n  var rgb = hexRgb(hex);\n  if (mixed) return rgbHex(TEXT_WEIGHT * rgb[0] + MIXED_WEIGHT * mixed[0], TEXT_WEIGHT * rgb[1] + MIXED_WEIGHT * mixed[1], TEXT_WEIGHT * rgb[2] + MIXED_WEIGHT * mixed[2]);\n  return hex;\n}","map":null,"metadata":{},"sourceType":"script"}