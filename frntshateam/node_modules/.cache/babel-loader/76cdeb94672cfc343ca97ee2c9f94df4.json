{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\ShaTeam\\\\frntShateam\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\ShaTeam\\\\frntShateam\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\ShaTeam\\\\frntShateam\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\ShaTeam\\\\frntShateam\\\\src\\\\Vistas\\\\Post.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Main from \"../Components/Main\";\nimport { Link } from \"react-router-dom\";\nimport Avatar from \"../Components/Avatar\";\nimport Comentar from \"../Components/Comentar\";\nimport BotonLike from \"../Components/BotonLike\";\nimport Axios from \"axios\";\nimport Loading from \"../Components/Loading\";\nimport RecursoNoExiste from \"../Components/RecursoNoExiste\";\nimport { toggleLike, comentar } from \"../Helpers/post-helpers\";\nexport default function PostVista(_ref) {\n  var mostrarError = _ref.mostrarError,\n      match = _ref.match,\n      usuario = _ref.usuario;\n  var postId = match.params.id;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      enviandoLike = _useState2[0],\n      setEnviandoLike = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      post = _useState4[0],\n      setPost = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      postNoExiste = _useState8[0],\n      setPostNoExiste = _useState8[1];\n\n  useEffect(function () {\n    function cargarPost() {\n      return _cargarPost.apply(this, arguments);\n    }\n\n    function _cargarPost() {\n      _cargarPost = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _yield$Axios$get, _post, _error$response, _error$response2;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return Axios.get(\"/api/posts/\".concat(postId));\n\n              case 3:\n                _yield$Axios$get = _context.sent;\n                _post = _yield$Axios$get.data;\n                setPost(_post);\n                setLoading(false);\n                _context.next = 13;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](0);\n\n                if ((_context.t0 === null || _context.t0 === void 0 ? void 0 : (_error$response = _context.t0.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 404 || (_context.t0 === null || _context.t0 === void 0 ? void 0 : (_error$response2 = _context.t0.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 400) {\n                  setPostNoExiste(true);\n                } else {\n                  mostrarError(\"Hubo un problema cargando este post.\");\n                }\n\n                setLoading(false);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 9]]);\n      }));\n      return _cargarPost.apply(this, arguments);\n    }\n\n    cargarPost();\n  }, [postId]);\n\n  function onSubmitLike() {\n    return _onSubmitLike.apply(this, arguments);\n  }\n\n  function _onSubmitLike() {\n    _onSubmitLike = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var postActualizado;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!enviandoLike) {\n                _context2.next = 2;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 2:\n              _context2.prev = 2;\n              setEnviandoLike(true);\n              _context2.next = 6;\n              return toggleLike(post);\n\n            case 6:\n              postActualizado = _context2.sent;\n              setPost(postActualizado);\n              setEnviandoLike(false);\n              _context2.next = 16;\n              break;\n\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](2);\n              setEnviandoLike(false);\n              mostrarError('Hubo un problema modificando el like, Intenta de nuevo');\n              console.log(_context2.t0);\n\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[2, 11]]);\n    }));\n    return _onSubmitLike.apply(this, arguments);\n  }\n\n  function onSubmitComentario(_x) {\n    return _onSubmitComentario.apply(this, arguments);\n  }\n\n  function _onSubmitComentario() {\n    _onSubmitComentario = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(mensaje) {\n      var postActualizado;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return comentar(post, mensaje, usuario);\n\n            case 2:\n              postActualizado = _context3.sent;\n              setPost(postActualizado);\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _onSubmitComentario.apply(this, arguments);\n  }\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(Main, {\n      center: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  if (postNoExiste) {\n    return /*#__PURE__*/React.createElement(RecursoNoExiste, {\n      mensaje: \"El post que estas intentando ver no existe\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }\n    });\n  }\n\n  if (post === null) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(Main, {\n    center: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Post, Object.assign({}, post, {\n    onSubmitComentario: onSubmitComentario,\n    onSubmitLike: onSubmitLike,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  })));\n}\n\nfunction Post(_ref2) {\n  var comentarios = _ref2.comentarios,\n      caption = _ref2.caption,\n      url = _ref2.url,\n      usuario = _ref2.usuario,\n      estaLike = _ref2.estaLike,\n      onSubmitLike = _ref2.onSubmitLike,\n      onSubmitComentario = _ref2.onSubmitComentario;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Post__image-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: url,\n    alt: caption,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Post__side-bar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    usuario: usuario,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Post__comentarios-y-like\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Comentarios, {\n    usuario: usuario,\n    caption: caption,\n    comentarios: comentarios,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Post__like\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(BotonLike, {\n    onSubmitLike: onSubmitLike,\n    like: estaLike,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Comentar, {\n    onSubmitComentario: onSubmitComentario,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }))));\n}\n\nfunction Comentarios(_ref3) {\n  var _this = this;\n\n  var usuario = _ref3.usuario,\n      caption = _ref3.caption,\n      comentarios = _ref3.comentarios;\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"Post__comentarios\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"Post__comentario\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/perfil/\".concat(usuario.username),\n    className: \"Post__autor-comentario\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, usuario.username + ' ')), caption), comentarios.map(function (comentario) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      className: \"Post__comentario\",\n      key: comentario._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/perfil/\".concat(comentario.usuario.username),\n      className: \"Post__autor-comentario\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 15\n      }\n    }, comentario.usuario.username + ' ')), comentario.mensaje);\n  }));\n}","map":{"version":3,"sources":["D:/ShaTeam/frntShateam/src/Vistas/Post.js"],"names":["React","useState","useEffect","Main","Link","Avatar","Comentar","BotonLike","Axios","Loading","RecursoNoExiste","toggleLike","comentar","PostVista","mostrarError","match","usuario","postId","params","id","enviandoLike","setEnviandoLike","post","setPost","loading","setLoading","postNoExiste","setPostNoExiste","cargarPost","get","data","response","status","onSubmitLike","postActualizado","console","log","onSubmitComentario","mensaje","Post","comentarios","caption","url","estaLike","Comentarios","username","map","comentario","_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Main from \"../Components/Main\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Avatar from \"../Components/Avatar\";\r\nimport Comentar from \"../Components/Comentar\";\r\nimport BotonLike from \"../Components/BotonLike\";\r\nimport Axios from \"axios\";\r\nimport Loading from \"../Components/Loading\";\r\nimport RecursoNoExiste from \"../Components/RecursoNoExiste\";\r\nimport { toggleLike, comentar } from \"../Helpers/post-helpers\";\r\n\r\nexport default function PostVista({ mostrarError, match, usuario }) {\r\n  const postId = match.params.id;\r\n  const [enviandoLike, setEnviandoLike] = useState(false);\r\n  const [post, setPost] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [postNoExiste, setPostNoExiste] = useState(false);\r\n\r\n  useEffect(() => {\r\n    async function cargarPost() {\r\n      try {\r\n        const { data: post } = await Axios.get(`/api/posts/${postId}`);\r\n        setPost(post);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        if (\r\n          error?.response?.status === 404 ||\r\n          error?.response?.status === 400\r\n        ) {\r\n          setPostNoExiste(true);\r\n        } else {\r\n          mostrarError(\"Hubo un problema cargando este post.\");\r\n        }\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    cargarPost();\r\n  }, [postId]);\r\n\r\n  async function onSubmitLike() {\r\n    if(enviandoLike) {\r\n        return;\r\n    }\r\n\r\n    try {\r\n        setEnviandoLike(true);\r\n        const postActualizado = await toggleLike(post);\r\n        setPost(postActualizado);\r\n        setEnviandoLike(false);\r\n    } catch (error) {\r\n        setEnviandoLike(false);\r\n        mostrarError('Hubo un problema modificando el like, Intenta de nuevo');\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nasync function onSubmitComentario(mensaje) {\r\n    const postActualizado = await comentar(post, mensaje, usuario);\r\n    setPost(postActualizado);\r\n}\r\n\r\n\r\n  if (loading) {\r\n    return (\r\n      <Main center>\r\n        <Loading />\r\n      </Main>\r\n    );\r\n  }\r\n\r\n  if (postNoExiste) {\r\n    return (\r\n      <RecursoNoExiste mensaje=\"El post que estas intentando ver no existe\" />\r\n    );\r\n  }\r\n\r\n  if (post === null) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Main center>\r\n      <Post {...post} onSubmitComentario={onSubmitComentario} onSubmitLike={onSubmitLike} />\r\n    </Main>\r\n  );\r\n}\r\n\r\nfunction Post({\r\n  comentarios,\r\n  caption,\r\n  url,\r\n  usuario,\r\n  estaLike,\r\n  onSubmitLike,\r\n  onSubmitComentario,\r\n}) {\r\n  return (\r\n    <div className=\"Post\">\r\n      <div className=\"Post__image-container\">\r\n        <img src={url} alt={caption} />\r\n      </div>\r\n      <div className=\"Post__side-bar\">\r\n        <Avatar usuario={usuario}></Avatar>\r\n        <div className=\"Post__comentarios-y-like\">\r\n          <Comentarios\r\n            usuario={usuario}\r\n            caption={caption}\r\n            comentarios={comentarios}\r\n          />\r\n          <div className=\"Post__like\">\r\n            <BotonLike onSubmitLike={onSubmitLike} like={estaLike}></BotonLike>\r\n          </div>\r\n          <Comentar onSubmitComentario={onSubmitComentario}></Comentar>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Comentarios({ usuario, caption, comentarios }) {\r\n  return (\r\n    <ul className=\"Post__comentarios\">\r\n      <li className=\"Post__comentario\">\r\n        <Link\r\n          to={`/perfil/${usuario.username}`}\r\n          className=\"Post__autor-comentario\"\r\n        >\r\n            <b>{usuario.username + ' '}</b> \r\n        </Link>\r\n        {caption}\r\n      </li>\r\n      {comentarios.map((comentario) => (\r\n        <li className=\"Post__comentario\" key={comentario._id}>\r\n          <Link\r\n            to={`/perfil/${comentario.usuario.username}`}\r\n            className=\"Post__autor-comentario\"\r\n          >\r\n              <b>{comentario.usuario.username + ' '}</b>\r\n          </Link>\r\n          {comentario.mensaje}\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}