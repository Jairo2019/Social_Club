{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\ShaTeam\\\\frntShateam\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\ShaTeam\\\\frntShateam\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\ShaTeam\\\\frntShateam\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\ShaTeam\\\\frntShateam\\\\src\\\\Components\\\\Post.js\";\nimport React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Avatar from \"./Avatar\";\nimport BotonLike from \"./BotonHobby\";\nimport Comentar from \"./Comentar\";\nimport { toggleLike, comentar } from \"../Helpers/post-helpers\";\nimport { useUsuario } from \"../Context/usuario-context\";\nexport default function Post(_ref) {\n  var post = _ref.post,\n      actualizarPost = _ref.actualizarPost,\n      mostrarError = _ref.mostrarError;\n\n  var _useUsuario = useUsuario(),\n      usuario = _useUsuario.usuario;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      enviandoLike = _useState2[0],\n      setEnviandoLike = _useState2[1];\n\n  var numLikes = post.numLikes,\n      numComentarios = post.numComentarios,\n      comentarios = post.comentarios,\n      _id = post._id,\n      caption = post.caption,\n      url = post.url,\n      usuarioDePost = post.usuario,\n      estaLike = post.estaLike;\n\n  function _onSubmitLike2() {\n    return _onSubmitLike.apply(this, arguments);\n  }\n\n  function _onSubmitLike() {\n    _onSubmitLike = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var postActualizado;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!enviandoLike) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 2:\n              _context.prev = 2;\n              setEnviandoLike(true);\n              _context.next = 6;\n              return toggleLike(post);\n\n            case 6:\n              postActualizado = _context.sent;\n              actualizarPost(post, postActualizado);\n              setEnviandoLike(false);\n              _context.next = 16;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](2);\n              setEnviandoLike(false);\n              mostrarError('Hubo un problema modificando el like, Intenta de nuevo');\n              console.log(_context.t0);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 11]]);\n    }));\n    return _onSubmitLike.apply(this, arguments);\n  }\n\n  function onSubmitComentario(_x) {\n    return _onSubmitComentario.apply(this, arguments);\n  }\n\n  function _onSubmitComentario() {\n    _onSubmitComentario = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(mensaje) {\n      var postActualizado;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return comentar(post, mensaje, usuario);\n\n            case 2:\n              postActualizado = _context2.sent;\n              actualizarPost(post, postActualizado);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _onSubmitComentario.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Post-Componente\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    usuario: usuarioDePost,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: url,\n    alt: caption,\n    className: \"Post-Componente__img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Post-Componente__acciones\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Post-Componente__like-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(BotonLike, {\n    onSubmitLike: function onSubmitLike() {\n      return _onSubmitLike2();\n    },\n    like: estaLike,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }, \"My Hobby de \", numLikes, \" personas\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/perfil/\".concat(usuarioDePost.username),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 29\n    }\n  }, usuarioDePost.username + ' ')), caption), /*#__PURE__*/React.createElement(VerTodosLosComentarios, {\n    _id: _id,\n    numComentarios: numComentarios,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Comentarios, {\n    comentarios: comentarios,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(Comentar, {\n    onSubmitComentario: onSubmitComentario,\n    mostrarError: mostrarError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }));\n}\n\nfunction VerTodosLosComentarios(_ref2) {\n  var _id = _ref2._id,\n      numComentarios = _ref2.numComentarios;\n\n  if (numComentarios < 4) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"li\", {\n    className: \"text-grey-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/post/\".concat(_id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, \"Ver los \", numComentarios, \" comentarios\"));\n}\n\nfunction Comentarios(_ref3) {\n  var _this = this;\n\n  var comentarios = _ref3.comentarios;\n\n  if (comentarios.length === 0) {\n    return null;\n  }\n\n  return comentarios.map(function (comentario) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: comentario._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/perfil/\".concat(comentario.usuario.username),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }\n    }, comentario.usuario.username + ' ')), comentario.mensaje);\n  });\n}","map":{"version":3,"sources":["D:/ShaTeam/frntShateam/src/Components/Post.js"],"names":["React","useState","Link","Avatar","BotonLike","Comentar","toggleLike","comentar","useUsuario","Post","post","actualizarPost","mostrarError","usuario","enviandoLike","setEnviandoLike","numLikes","numComentarios","comentarios","_id","caption","url","usuarioDePost","estaLike","onSubmitLike","postActualizado","console","log","onSubmitComentario","mensaje","username","VerTodosLosComentarios","Comentarios","length","map","comentario"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Avatar from \"./Avatar\";\r\nimport BotonLike from \"./BotonHobby\";\r\nimport Comentar from \"./Comentar\";\r\nimport { toggleLike, comentar } from \"../Helpers/post-helpers\";\r\nimport { useUsuario } from \"../Context/usuario-context\";\r\n\r\nexport default function Post({ post, actualizarPost, mostrarError,}) {\r\n    const { usuario } = useUsuario();\r\n    const [enviandoLike, setEnviandoLike] = useState(false);\r\n    const {\r\n        numLikes,\r\n        numComentarios,\r\n        comentarios,\r\n        _id,\r\n        caption, \r\n        url,\r\n        usuario: usuarioDePost,\r\n        estaLike\r\n    } = post;\r\n\r\n    async function onSubmitLike() {\r\n        if(enviandoLike) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setEnviandoLike(true);\r\n            const postActualizado = await toggleLike(post);\r\n            actualizarPost(post,postActualizado);\r\n            setEnviandoLike(false);\r\n        } catch (error) {\r\n            setEnviandoLike(false);\r\n            mostrarError('Hubo un problema modificando el like, Intenta de nuevo');\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    async function onSubmitComentario(mensaje) {\r\n        const postActualizado = await comentar(post, mensaje, usuario);\r\n        actualizarPost(post, postActualizado);\r\n    }\r\n\r\n    return (\r\n        <div className=\"Post-Componente\">\r\n            <Avatar usuario={usuarioDePost}/>\r\n            <img src={url} alt={caption} className=\"Post-Componente__img\"/>\r\n            <div className=\"Post-Componente__acciones\">\r\n                <div className=\"Post-Componente__like-container\">\r\n                    <BotonLike onSubmitLike={() => onSubmitLike()} like={estaLike} />\r\n                </div>\r\n                <p>My Hobby de {numLikes} personas</p>\r\n                <ul>\r\n                    <li>\r\n                        <Link to={`/perfil/${usuarioDePost.username}`}>\r\n                            <b>{usuarioDePost.username + ' '}</b>\r\n                        </Link>\r\n                        {caption}\r\n                    </li>\r\n                    <VerTodosLosComentarios _id={_id} numComentarios={numComentarios} />\r\n                    <Comentarios comentarios={comentarios}/>\r\n                </ul>\r\n            </div>\r\n            <Comentar onSubmitComentario={onSubmitComentario} mostrarError={mostrarError} />\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction VerTodosLosComentarios({_id, numComentarios}) {\r\n    if(numComentarios < 4) {\r\n        return null;\r\n    }\r\n\r\n    return <li className=\"text-grey-dark\">\r\n        <Link to={`/post/${_id}`}>\r\n            Ver los {numComentarios} comentarios\r\n        </Link>\r\n    </li>\r\n}\r\n\r\nfunction Comentarios({comentarios}) {\r\n    if (comentarios.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    return comentarios.map((comentario) => {\r\n        return (\r\n            <li key={comentario._id}>\r\n                <Link to={`/perfil/${comentario.usuario.username}`}>\r\n                    <b>{comentario.usuario.username + ' '}</b>\r\n                </Link>\r\n                {comentario.mensaje}\r\n            </li>\r\n        )\r\n    })\r\n}"]},"metadata":{},"sourceType":"module"}